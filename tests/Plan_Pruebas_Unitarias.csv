ID,Componente,Método/Función,Caso de Prueba,Input,Resultado Esperado,Resultado Obtenido,Estado,Cobertura %,Tester,Fecha
UT-001,AuthService,login(),Login con credenciales válidas,"RUT: 12345678-9, Password: Test1234","Token JWT válido, Expiración correcta",,Pendiente,,,
UT-002,AuthService,login(),Login con credenciales inválidas,"RUT: 12345678-9, Password: incorrect","Error 401, Mensaje: Credenciales inválidas",,Pendiente,,,
UT-003,VehicleService,create(),Crear vehículo con datos válidos,"{ licensePlate: 'AAAA-11', type: 'Camión', brand: 'Chevrolet' }","Vehículo creado en BD, ID retornado",,Pendiente,,,
UT-004,VehicleService,create(),Crear vehículo con patente duplicada,"{ licensePlate: 'AAAA-11' } (existente)","Error 409, Mensaje: Patente ya existe",,Pendiente,,,
UT-005,WorkOrderService,assign(),Asignar mecánico disponible,"workOrderId, mechanicId","OT actualizada, assignedToId correcto",,Pendiente,,,
UT-006,SparePartService,requestPart(),Solicitar repuesto con stock,"sparePartId, quantity: 5, stock: 50","Stock decrementado a 45, Solicitud creada",,Pendiente,,,
UT-007,SparePartService,requestPart(),Solicitar repuesto sin stock,"sparePartId, quantity: 10, stock: 5","Error: Stock insuficiente, Stock sin cambios",,Pendiente,,,
UT-008,ValidationUtils,validateRut(),RUT válido chileno,12345678-9,true,,Pendiente,,,
UT-009,ValidationUtils,validateRut(),RUT inválido,12345678-0,false,,Pendiente,,,
UT-010,WorkOrderUtils,calculateWorkDuration(),Calcular duración sin pausas,"startedAt: 2025-01-01 08:00, completedAt: 2025-01-01 12:00","4 horas (240 minutos)",,Pendiente,,,
UT-011,WorkOrderUtils,calculateWorkDuration(),Calcular duración con pausas,"startedAt: 08:00, completedAt: 17:00, pauseDuration: 60","8 horas (480 minutos sin pausa de 60min)",,Pendiente,,,
UT-012,AuthService,verifyToken(),Token válido no expirado,Valid JWT token,"Payload decodificado, Usuario identificado",,Pendiente,,,
UT-013,AuthService,verifyToken(),Token expirado,Expired JWT token,"Error: Token expirado, Código 401",,Pendiente,,,
UT-014,VehicleService,search(),Búsqueda por patente exacta,AAAA-11,"Vehículo encontrado, Datos completos",,Pendiente,,,
UT-015,VehicleService,search(),Búsqueda sin resultados,ZZZZ-99,"Array vacío, Sin errores",,Pendiente,,,
UT-016,SparePartService,updateStock(),Incrementar stock,"sparePartId, quantity: +50","Stock incrementado, Movimiento registrado",,Pendiente,,,
UT-017,SparePartService,updateStock(),Decrementar stock válido,"sparePartId, quantity: -10, stock actual: 50","Stock decrementado a 40",,Pendiente,,,
UT-018,SparePartService,checkMinStock(),Stock por debajo del mínimo,"currentStock: 5, minStock: 10","Alerta generada, Boolean: true",,Pendiente,,,
UT-019,NotificationService,create(),Crear notificación,"userId, title, message","Notificación creada en BD, ID retornado",,Pendiente,,,
UT-020,WorkOrderService,changeStatus(),Cambio de estado válido,"orderId, status: 'en_progreso'","Estado actualizado, Historial creado",,Pendiente,,,
UT-021,WorkOrderService,changeStatus(),Cambio de estado inválido,"orderId, status: 'estado_invalido'","Error de validación, Estado sin cambios",,Pendiente,,,
UT-022,VehicleEntryService,create(),Crear ingreso completo,"vehicleId, driverRut, entryKm, fuelLevel","Ingreso creado, Código único generado",,Pendiente,,,
UT-023,VehicleEntryService,registerExit(),Registrar salida válida,"entryId, exitKm > entryKm","Salida registrada, exitDate actualizado",,Pendiente,,,
UT-024,VehicleEntryService,registerExit(),Salida con OT pendiente,"entryId con OT no completada","Error: OT pendiente, Salida bloqueada",,Pendiente,,,
UT-025,ReportService,generateFleetReport(),Reporte con datos,"dateFrom, dateTo, regionId","Objeto con métricas correctas, Totales calculados",,Pendiente,,,
UT-026,ReportService,generateFleetReport(),Reporte sin datos en período,"dateFrom: 2020-01-01, dateTo: 2020-01-02","Objeto con valores en cero, Sin errores",,Pendiente,,,
UT-027,AuthMiddleware,authenticate(),Request con token válido,"req.headers.authorization: Bearer {token}","next() llamado, req.user poblado",,Pendiente,,,
UT-028,AuthMiddleware,authenticate(),Request sin token,req.headers.authorization: undefined,"Error 401, next() no llamado",,Pendiente,,,
UT-029,RBACMiddleware,authorize(),Usuario con permiso requerido,"user.roleId con permiso 'vehicles:write'","next() llamado, Acceso permitido",,Pendiente,,,
UT-030,RBACMiddleware,authorize(),Usuario sin permiso,"user.roleId sin permiso requerido","Error 403, next() no llamado",,Pendiente,,,
